-- Function to apply modifications
local function modifyCharacter(player)
    local character = player.Character or player.CharacterAdded:Wait()

    -- Wait for essential parts to load
    local leftLeg = character:WaitForChild("Left Leg")
    local rightLeg = character:WaitForChild("Right Leg")
    local playerInfo = character:WaitForChild("PlayerInfo")

    -- Set Stamina and JumpMultiplier
    playerInfo.Stamina.Value = 100
    playerInfo.JumpMultiplier.Value = 2

    -- Modify legs
    local originalSize = Vector3.new(1, 2, 1)

    -- Create visual legs
    local visualLeftLeg = leftLeg:Clone()
    visualLeftLeg.Name = "VisualLeftLeg"
    visualLeftLeg.Parent = leftLeg
    visualLeftLeg.Size = originalSize
    visualLeftLeg.CanCollide = false
    visualLeftLeg.Transparency = 0
    visualLeftLeg.Massless = true

    local visualRightLeg = rightLeg:Clone()
    visualRightLeg.Name = "VisualRightLeg"
    visualRightLeg.Parent = rightLeg
    visualRightLeg.Size = originalSize
    visualRightLeg.CanCollide = false
    visualRightLeg.Transparency = 0
    visualRightLeg.Massless = true

    -- Set hitbox legs size and properties
    leftLeg.Size = Vector3.new(30, 2, 30)
    leftLeg.CanCollide = false
    leftLeg.Transparency = 1
    leftLeg.Massless = true

    rightLeg.Size = Vector3.new(30, 2, 30)
    rightLeg.CanCollide = false
    rightLeg.Transparency = 1
    rightLeg.Massless = true
end

-- Hook into the character respawn event
local player = game.Players.LocalPlayer
player.CharacterAdded:Connect(function(character)
    task.wait(0.5) -- Small delay to ensure all parts load
    modifyCharacter(player)
end)

-- Initial modification
if player.Character then
    modifyCharacter(player)
end

-- Keep stamina and jump multiplier updated
spawn(function()
    while true do
        local character = player.Character
        if character then
            local playerInfo = character:FindFirstChild("PlayerInfo")
            if playerInfo then
                playerInfo.Stamina.Value = 100
                playerInfo.JumpMultiplier.Value = 2
            end
        end
        task.wait()
    end
end)
